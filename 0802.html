<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="0802.css">
    <title>音声認識サンプル</title>
</head>
<body>
<!--header-->
<header>
    <h1 class="headline">
        <a>RemoteSales</a>
    </h1>
    <!--<ul class="nav-line">
        <li class="nav-list-item">Home</li>
        <li class="nav-list-item">About</li>
        <li class="nav-list-item">Search</li>
    </ul>-->
</header>

<div id="container">
    <div id="client-info">
        <h2>Client-Info</h2>
    </div>
    <div id="product-list">
        <h2>Product-List</h2>
    </div>
    <div id="talklog" cols="100" rows="10">
        <h2>TalkLog</h2>
        <button id="btn">start</button>
    </div>
    <div id="client-list">
        <h2>Client-List</h2>
    </div>
    <div id="salesgrade">
        <h2>SalesGrade</h2>
    </div>
</div>
<script>
//音声認識の準備
const speech = new webkitSpeechRecognition();
speech.lang = 'ja-JP';

//使用する変数を用意
const btn = document.getElementById('btn');
const content = document.getElementById('talklog');


btn.addEventListener('click' , function() {
    // 音声認識をスタート
    speech.start();
});


/*
speech.addEventListener('result' , function(e) {
   // 音声認識で取得した情報を、コンソール画面に表示
   console.log(e);
   const text = e.results[0][0].transcript;
   content.innerText = text;
});
*/
//add//

speech.onresult = function(e) {
    speech.stop();
    if(e.results[0].isFinal){
        var autotext =  e.results[0][0].transcript
        console.log(e);
        console.log(autotext);
        content.innerHTML += '<div>'+ autotext +'</div>';
    }
}

speech.onend = () => { 
    speech.start() 
};
</script>
<body>
<html>